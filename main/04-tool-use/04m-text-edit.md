# 04m - 文本编辑工具

Claude 自带一个无需从零创建的工具：文本编辑器工具。这个工具使 Claude 能够像在标准文本编辑器中一样处理文件和目录。

## 用途

文本编辑工具为 Claude 提供了一套全面的文件操作功能：

- 查看文件或目录内容
- 查看文件中的特定行范围
- 在文件中替换文本
- 创建新文件
- 在文件特定行插入文本
- 撤销最近对文件的编辑

这极大地扩展了 Claude 的能力，并基本上赋予它从一开场就作为软件工程师行动的能力。

## 使用

这里有点令人困惑：虽然工具模式已集成到 Claude 中，但你仍然需要提供实际的实现。可以这样理解——Claude 知道如何请求文件操作，但你需要编写实际执行这些操作的代码。

当你使用其他工具时，你需要编写 JSON 模式以及函数实现。对于文本编辑工具，Claude 提供模式知识，但你必须编写函数来处理 Claude 请求创建文件、读取目录、替换文本等操作。

虽然主模式已集成到 Claude 中，但在发起请求时仍需包含一个小的模式存根。确切的模式取决于您正在使用的 Claude 模型：

```python
def get_text_edit_schema(model):
    if model.startswith("claude-3-7-sonnet"):
        return {
            "type": "text_editor_20250124",
            "name": "str_replace_editor",
        }
    elif model.startswith("claude-3-5-sonnet"):
        return {
            "type": "text_editor_20241022", 
            "name": "str_replace_editor",
        }
```

## 例子

例如，如果你让 Claude 执行"打开 ./main.py 文件并总结其内容"的指令，Claude 将：

- 使用文本编辑工具查看该文件
- 阅读内容
- 为您提供摘要

例如："打开 ./main.py 文件，并写出计算圆周率到第五位的函数。然后创建一个 ./test.py 文件来测试您的实现。" Claude 将：

- 查看现有的 main.py 文件
- 用包含 pi 计算函数的新实现替换其内容
- 创建一个包含适当单元测试的新 test.py 文件

你可能想知道为什么这个工具存在，因为现代代码编辑器已经内置了 AI 助手。这个文本编辑工具在以下场景中变得有价值：

- 你正在构建需要编程编辑文件的应用程序
- 你正在没有完整功能代码编辑器的环境中工作
- 你想将文件编辑功能直接集成到你的 Claude 驱动应用程序中

本质上，文本编辑工具可以让您在自己的应用程序中复制大部分高级 AI 驱动代码编辑器的功能，让您能够精细控制 Claude 与您的文件系统交互的方式。
