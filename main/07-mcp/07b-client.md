# 07b - MCP 客户端

MCP 客户端是你的服务器与 MCP 服务器之间通信的桥梁，是访问 MCP 服务器提供的所有工具的入口点，帮助处理所有消息传递和协议的细节。

## 传输无关性

MCP 的一个关键优势是它是传输无关的，客户端和服务器之间可以使用多种通信方法。最常见的是在同一台机器上运行 MCP 客户端和服务器，之间通过标准输入/输出通信。

除了 stdio，客户端和服务器也可以通过以下方式连接：

- HTTP
- WebSockets
- 各种其他网络协议

## 消息类型

一旦完成连接，客户端和服务器将交换 MCP 规范中定义的特定消息类型，主要有：

- ListToolsRequest / ListToolsResult：客户端询问服务器提供哪些工具，得到可用工具的列表
- CallToolRequest / CallToolResult：客户端请求服务器运行特定工具并传入某些参数，然后接收结果

## 完整流程示例

假设用户询问“我有哪些 Repo？”，以下是完整的通信流程：

![img](./07b-client.assets/1.jpg)

- 用户向你的应用服务器提交查询，服务器发现在发起请求前需要向 Claude 提供一份可用工具的列表
- 你的应用服务器向 MCP 客户端请求工具列表，客户端向 MCP 服务器发送 `ListToolsRequest` ，并接收 `ListToolsResult`
- 现在你的服务器拥有用户的问题和可用的工具，可以向 Claude 发起初始请求
- Claude 检查了工具，决定调用某一个来回答问题，所以以工具使用请求作为响应
- 你的应用服务器要求 MCP 客户端执行 Claude 请求的工具，MCP 客户端向 MCP 服务器发送 `CallToolRequest` ，然后由 MCP 服务器向 GitHub 发起 API 请求
- GitHub 返回 Repo 数据，通过 MCP 服务器作为 `CallToolResult` 返回到 MCP 客户端，最后到你的应用服务器
- 你的应用服务器通过后续消息将工具调用结果发送回 Claude，Claude 现在拥有它所需的所有信息，可以形成完整的回复
- 最后，Claude 返回回答，你的应用服务器将其传递回用户

可以看到每个组件都有明确的职责。MCP 客户端抽象了与外部服务通信的复杂性，让你专注于构建 AI 应用逻辑。
